<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"> 

<h:head>
	<meta charset="UTF-8"></meta>
    <title>Pharmacy</title>
</h:head> 
<h:body> 

	<h3>Product: </h3>
	
	<h:form>
		<p:dataTable value="#{defaultProductBean.products}" var="p" 
					widgetVar="pTable"
					emptyMessage="No products found with given criteria"
					filteredValue="#{defaultProductBean.filteredProducts}"
			   		border="1"
			  		reflow="true" rows="5" paginator="true">
			  			
			<f:facet name="header">
				<p:outputPanel>
			    	<h:outputText value="Search all fields:" />
			        <p:inputText id="globalFilter" onkeyup="PF('pTable').filter()" style="width:150px" placeholder="Enter keyword"/>
			    </p:outputPanel>
			</f:facet>
						   			
			<p:column filterBy="#{p.id}" headerText="Id" footerText="contains" filterMatchMode="contains">
				<h:outputText value="#{p.id}" />
			</p:column>
							    			
			<p:column filterBy="#{p.name}" headerText="Name" footerText="contains" filterMatchMode="contains">
				<h:outputText value="#{p.name}" />
			</p:column>
							    			
			<p:column filterBy="#{p.productLabel}" headerText="Product label" footerText="contains" filterMatchMode="contains">
				<h:outputText value="#{p.productLabel}" />
			</p:column>
			
			<p:column filterBy="#{p.price}" headerText="Price" footerText="lte" filterMatchMode="lte">
				<f:facet name="filter">
	                <p:spinner onchange="PF('pTable').filter()">
	                    <f:converter converterId="javax.faces.Double" />
	                </p:spinner>
	            </f:facet>
				<h:outputText value="#{p.price}" />
			</p:column>	
			
			<p:column filterBy="#{p.available}" headerText="Available" footerText="contains" filterMatchMode="contains">
				<h:outputText value="#{p.available}" />
			</p:column>	
			
			<p:column filterBy="#{p.expirationDate}" headerText="Expiration date" footerText="contains" filterMatchMode="contains">
				<h:outputText value="#{p.expirationDate}" />
			</p:column>	  	
			
			<p:column filterBy="#{p.refunded}" headerText="Refunded [%]" footerText="lte" filterMatchMode="lte">
				<f:facet name="filter">
	                <p:spinner onchange="PF('pTable').filter()">
	                    <f:converter converterId="javax.faces.Integer" />
	                </p:spinner>
	            </f:facet>
				<h:outputText value="#{p.refunded}" />
			</p:column>	 
			
			<p:column filterBy="#{p.type}" headerText="Type" footerText="contains" filterMatchMode="contains">
				<h:outputText value="#{p.type}" />
			</p:column>	     			
		</p:dataTable>
	</h:form>

	<p:separator/>
			
	<h:form>
		<p:commandButton action="logged.xhtml?faces-redirect=true" value="Back" />
	</h:form>

</h:body> 
</html>
